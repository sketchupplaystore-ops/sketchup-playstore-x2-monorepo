<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\HealthController;
use App\Http\Controllers\MultipartUploadController;
use App\Http\Controllers\FilesController;

Route::get('/health', [HealthController::class, 'index']);

Route::prefix('uploads')->group(function () {
    Route::post('/create',    [MultipartUploadController::class, 'create']);
    Route::post('/sign-part', [MultipartUploadController::class, 'signPart']);
    Route::post('/complete',  [MultipartUploadController::class, 'complete']);
    Route::post('/abort',     [MultipartUploadController::class, 'abort']);
});

Route::get('/files',        [FilesController::class, 'index']);
Route::post('/files/url',   [FilesController::class, 'url']);
Route::delete('/files',     [FilesController::class, 'destroy']);    // ?key=uploads/foo.skp
Route::post('/files/rename',[FilesController::class, 'rename']);     // {fromKey,toKey}
